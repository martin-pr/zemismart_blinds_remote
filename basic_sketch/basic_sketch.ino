#include <avr/pgmspace.h>

PROGMEM constexpr char rawData[] = {3, -5, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 3, -5, 3, -5, 3, -5, 2, -2, 2, -2, 2, -2, 2, -2, 2, -2, 2, -2, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 3, -5, 2, -2, 3, -5, 3, -5, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 2, -2, 3, -5, 3, -5, 3, -5, 3, -5, 2, -2, 3, -5, 2, -2, 3, -5, 2, -1, 3, -32, 10, -21, 2, -2, 2, -2, 3, -5, 3, -5, 2, -2, 2, -2, 3, -5, 2, -2, 3, -5, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 3, -5, 3, -5, 3, -5, 2, -2, 2, -2, 2, -2, 2, -2, 2, -2, 2, -2, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 3, -5, 2, -2, 3, -5, 3, -5, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 2, -2, 3, -5, 3, -5, 3, -5, 3, -5, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 3, -32, 11, -21, 2, -2, 2, -2, 3, -5, 3, -5, 2, -2, 2, -2, 3, -5, 2, -2, 3, -5, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 3, -5, 3, -5, 3, -5, 2, -2, 2, -2, 2, -2, 2, -2, 2, -2, 2, -2, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 3, -5, 2, -2, 3, -5, 3, -5, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 2, -2, 3, -5, 3, -5, 3, -5, 3, -5, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 3, -32, 11, -21, 2, -2, 2, -2, 3, -5, 3, -5, 2, -2, 2, -2, 3, -5, 2, -2, 3, -5, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 3, -5, 3, -5, 3, -5, 2, -2, 2, -2, 2, -2, 2, -2, 2, -2, 2, -2, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 3, -5, 2, -2, 3, -5, 3, -5, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 3, -5, 2, -2, 3, -5, 2, -2, 2, -2, 3, -5, 2, -2, 2, -2, 2, -2, 3, -5, 2, -2, 3, -5, 3, -5, 3, -5, 3, -5, 2, -2, 3, -5, 2, -2, 3, -5, 2, -1, 3, -559, 1, -11, 0, -3, 0, -87, 0, -13, 1, -1, 1, -1, 1, -1, 1, -1, 1, -10, 2, -1, 2, -1, 1, 0, 2, -1, 4, 0, 6, -1, 3, 0, 1, -43, 0, 0, 0, -28, 0, -11, 0, -1, 1, -3, 2, 0, 1, -1, 1, -87, 0, -2, 0, -2, 0, -5, 0, -1, 1, 0, 0, -1, 0, -1, 0, -1, 0, -1, 1, -1, 0, -6, 0, 0, 1, -1, 1, -2, 0, -1, 1, 0, 1, 0, 1, 0, 1, -2, 1, 0, 3, 0, 8, 0, 4, -1, 1, -40, 0, -1, 0, -4, 0, -35, 0, -1, 1, -2, 1, -7, 0, -4, 0, -3, 1, 0, 1, -1, 1, -1, 1, -1, 1, -1, 1, -1, 0, -3, 1, -5, 0, 0, 0, 0, 2, 0, 1, -1, 1, -2, 2, -1, 1, 0, 4, 0, 5, -48, 0, -17, 1, -3, 0, -8, 1, 0, 1, -1, 1, -1, 1, -2, 1, -9, 0, -1, 4, 0, 1, 0, 1, 0, 1, -1, 1, -1, 1, 0, 2, 0, 2, -39, 1, -3, 0, -13, 1, -15, 1, -7, 2, -1, 0, -1, 1, -1, 1, -1, 1, -1, 1, -2, 1, 0, 1, 0, 1, 0, 1, -5, 3, -1, 1, 0, 1, 0, 3, 0, 4, 0, 1, 0, 1, 0, 15, 0, 9, -49, 0, -1, 0, 0, 0, -4, 1, -4, 1, -1, 1, 0, 1, -1, 1, 0, 0, -1, 1, -1, 1, -1, 1, -3, 0, 0, 1, -3, 4, 0, 3, 0, 1, 0, 15, 0, 21, -26, 0, -2, 1, -3, 0, 0, 1, 0, 1, -1, 1, -2, 0, -1, 1, -1, 0, 0, 0, -2, 1, -2, 1, -4, 1, -1, 1, -1, 1, -1, 2, 0, 1, 0, 1, 0, 12, 0, 6, 0, 17, -35, 1, -1, 0, -3, 1, -1, 1, 0, 1, -1, 1, -1, 1, 0, 1, -73, 0, -23, 0, -3, 1, 0, 1, -1, 1, -1, 1, 0, 1, -1, 1, -1, 0, 0, 1, -1, 1, -3, 2, -1, 1, -1, 0, 0, 2, 0, 1, 0, 1, 0, 2, 0, 10, -1, 1, -1, 0, -26, 0, -2, 1, -7, 0, -1, 1, -1, 1, -3, 1, -1, 1, -2, 1, -1, 0, -1, 1, -1, 0, -2, 2, -1, 1, 0, 1, 0, 1, 0, 2, -1, 7, 0, 3, 0};
constexpr unsigned rawDataLen = sizeof(rawData) / sizeof(char);

#define TRAMSMISSION_PIN 0
#define LED_PIN 1

#define MULT 212  // unit of the sample - 212us
#define SUBT 50  // the microseconds used by the rest of the algorithm

void setup() {
  pinMode(LED_PIN, OUTPUT);
  pinMode(TRAMSMISSION_PIN, OUTPUT);
}

void loop() {
  for(unsigned i=0;i<rawDataLen;++i) {
    int val = (char)pgm_read_byte(rawData + i);
    digitalWrite(TRAMSMISSION_PIN, val < 0 ? LOW : HIGH);
    delayMicroseconds(abs(val * MULT) - SUBT);
  }
  
  digitalWrite(LED_PIN, HIGH);
  delay(2000);
  digitalWrite(LED_PIN, LOW);
}
